<h1>TP Express + MongoDB — Guide Complet</h1><p>arborescence du projet<br /><br />tp-express-mongo/<br />│<br />├── src/<br />│   ├── server.js              <br />│   │<br />│   ├── api/<br />│   │   ├── models/<br />│   │   │   └── user.model.js   # Schéma MongoDB<br />│   │   │<br />│   │   ├── controllers/<br />│   │   │   └── user.controller.js  # Logique métier CRUD<br />│   │   │<br />│   │   └── routes/<br />│   │       └── user.routes.js  # Définition des endpoints REST<br />│   │<br />│   ├── middlewares/<br />│   │   └── logger.js           <br />│   │<br />│   └── config/<br />│       └── db.js               <br />│<br />├── .env                        <br />├── package.json<br />└── README.md<br /><br /> Idée clé :<br /><br />models = structure de la donnée (MongoDB)<br />controllers = logique (que faire avec cette donnée)<br />routes = quelles URL et quel HTTP method appellent quel controller<br />server.js = colle tout ensemble et démarre le serveur<br /></p><p>2. Initialisation rapide (rappel)<br /><br />mkdir tp-express-mongo<br />cd tp-express-mongo<br /><br />npm init -y<br /><br />npm install express mongoose dotenv<br />npm install --save-dev nodemon<br /></p><p>3. Création des dossiers/fichiers<br /><br />mkdir src<br />cd src<br />mkdir api middlewares config<br />cd api<br />mkdir models controllers routes<br />cd ../..<br />touch .env README.md<br />touch src/server.js<br />touch src/config/db.js<br />touch src/middlewares/logger.js<br />touch src/api/models/user.model.js<br />touch src/api/controllers/user.controller.js<br />touch src/api/routes/user.routes.js<br /></p><p>4. Fichier .env<br /><br />PORT=5000<br />MONGODB_URI=mongodb://localhost:27017/tp_express_mongo<br /><br />PORT → port HTTP<br />MONGODB_URI → base MongoDB locale<br /></p><p>5. Connexion MongoDB – src/config/db.js<br /><br />const mongoose = require('mongoose');<br /><br />const connectDB = async () =&gt; {<br />  try {<br />    await mongoose.connect(process.env.MONGODB_URI);<br />    console.log('MongoDB connecté');<br />  } catch (error) {<br />    console.error(error.message);<br />    process.exit(1);<br />  }<br />};<br />module.exports = connectDB;<br /><br /> Pourquoi ?<br />- mongoose.connect → connexion DB<br />- process.env → variables .env<br />- process.exit(1) → stop API si DB HS<br /></p><p>6. Modèle User – src/api/models/user.model.js<br /><br />const mongoose = require('mongoose');<br /><br />const userSchema = new mongoose.Schema({<br />  name:String,email:String,age:Number<br />},{timestamps:true});<br /><br />module.exports = mongoose.model('User', userSchema);<br /></p><p> Rôle du modèle :<br />userSchema = structure de documents MongoDB<br />User = interface d’accès DB<br /></p><p>7. Controller CRUD – src/api/controllers/user.controller.js<br /><br />contient createUser, getAllUsers, getUserById, updateUser, deleteUser<br /></p><p>8. Routes User – src/api/routes/user.routes.js<br /><br />router.post('/', createUser);<br />router.get('/', getAllUsers);<br />router.get('/:id', getUserById);<br />router.put('/:id', updateUser);<br />router.delete('/:id', deleteUser);<br /><br /> router = liaison HTTP → controller<br /></p><p>9. Middleware logger – src/middlewares/logger.js<br /><br />console.log(req.method, req.url); next();<br /><br /> Sert pour debug<br /></p><p>10. server.js (fichier principal)<br /><br />dotenv.config(); connectDB(); app.use(express.json());<br />app.use(logger);<br />app.use('/api/users',userRoutes);<br />app.listen(PORT);<br /></p><p>11. Scripts package.json<br /><br />"start":"node src/server.js", "dev":"nodemon src/server.js"<br /></p><p>12. Lancement<br /><br />npm run dev<br /><br />Test API :<br />POST /api/users {name,email,age}<br />GET/PUT/DELETE /api/users/:id<br /></p><p>Creation de repo git : <br />git init</p><p>git add .</p><p>git commit -m "first commit"</p><p>git branch -M main</p><p>git remote add origin https://github.com/MohamedSbika/tp_express.git</p><p>git push -u origin main</p><p>Applications des methodes crud </p><p>Another git branch to make scenario reel <br />partie auth ( jwt + documentation ) in middleware <br />test avec postman </p><p>Partage de projet reelle avec express js </p><p>npm install bcryptjs jsonwebtoken</p>