<!DOCTYPE html>
<!-- Generated by PHPWord -->
<html>
<head>
<meta charset="UTF-8" />
<title>PHPWord</title>
<meta name="author" content="python-docx" />
<meta name="description" content="generated by python-docx" />
<style>
* {font-family: Arial; font-size: 11pt;}
a.NoteRef {text-decoration: none;}
hr {height: 1px; padding: 0; margin: 1em 0; border: 0; border-top: 1px solid #CCC;}
table {border: 1px solid black; border-spacing: 0px; width : 100%;}
td {border: 1px solid black;}
.Normal {margin-bottom: 10pt;}
h1 {font-size: 14pt; color: #365F91; font-weight: bold;}
h2 {font-size: 13pt; color: #4F81BD; font-weight: bold;}
h3 {color: #4F81BD; font-weight: bold;}
h4 {color: #4F81BD; font-weight: bold; font-style: italic;}
h5 {color: #243F60;}
h6 {color: #243F60; font-style: italic;}
h7 {color: #404040; font-style: italic;}
h8 {font-size: 10pt; color: #4F81BD;}
h9 {font-size: 10pt; color: #404040; font-style: italic;}
.header {margin-bottom: 0pt;}
.footer {margin-bottom: 0pt;}
.No Spacing {margin-bottom: 0pt;}
.Titre 1 Car {font-size: 14pt; color: #365F91; font-weight: bold;}
.Titre 2 Car {font-size: 13pt; color: #4F81BD; font-weight: bold;}
.Titre 3 Car {color: #4F81BD; font-weight: bold;}
.Title {font-size: 26pt; color: #17365D;}
.Titre Car {font-size: 26pt; color: #17365D;}
.Subtitle {font-size: 12pt; color: #4F81BD; font-style: italic;}
.Sous-titre Car {font-size: 12pt; color: #4F81BD; font-style: italic;}
.List Paragraph {margin-top: 0; margin-bottom: 0;}
.Body Text {margin-bottom: 6pt;}
.Body Text 2 {margin-bottom: 6pt;}
.Body Text 3 {font-size: 8pt;}
.Corps de texte 3 Car {font-size: 8pt;}
.List {margin-top: 0; margin-bottom: 0;}
.List 2 {margin-top: 0; margin-bottom: 0;}
.List 3 {margin-top: 0; margin-bottom: 0;}
.List Bullet {margin-top: 0; margin-bottom: 0;}
.List Bullet 2 {margin-top: 0; margin-bottom: 0;}
.List Bullet 3 {margin-top: 0; margin-bottom: 0;}
.List Number {margin-top: 0; margin-bottom: 0;}
.List Number 2 {margin-top: 0; margin-bottom: 0;}
.List Number 3 {margin-top: 0; margin-bottom: 0;}
.List Continue {margin-bottom: 6pt;}
.List Continue 2 {margin-bottom: 6pt;}
.List Continue 3 {margin-bottom: 6pt;}
.macro {font-family: 'Courier'; font-size: 10pt;}
.Texte de macro Car {font-family: 'Courier'; font-size: 10pt;}
.Quote {color: #000000; font-style: italic;}
.Citation Car {color: #000000; font-style: italic;}
.Titre 4 Car {color: #4F81BD; font-weight: bold; font-style: italic;}
.Titre 5 Car {color: #243F60;}
.Titre 6 Car {color: #243F60; font-style: italic;}
.Titre 7 Car {color: #404040; font-style: italic;}
.Titre 8 Car {font-size: 10pt; color: #4F81BD;}
.Titre 9 Car {font-size: 10pt; color: #404040; font-style: italic;}
.caption {font-size: 9pt; color: #4F81BD; font-weight: bold;}
.Strong {font-weight: bold;}
.Emphasis {font-style: italic;}
.Intense Quote {color: #4F81BD; font-weight: bold; font-style: italic;}
.Citation intense Car {color: #4F81BD; font-weight: bold; font-style: italic;}
.Subtle Emphasis {color: #808080; font-style: italic;}
.Intense Emphasis {color: #4F81BD; font-weight: bold; font-style: italic;}
.Subtle Reference {color: #C0504D; text-decoration: underline ; font-variant: small-caps;}
.Intense Reference {color: #C0504D; font-weight: bold; text-decoration: underline ; font-variant: small-caps;}
.Book Title {font-weight: bold; font-variant: small-caps;}
.TOC Heading {margin-top: 0; margin-bottom: 0;}
.HTML Preformatted {font-family: 'Consolas'; font-size: 10pt;}
.Préformaté HTML Car {font-family: 'Consolas'; font-size: 10pt;}
</style>
</head>
<body>
<p style="margin-top: 0; margin-bottom: 0;">TP Express + MongoDB — Guide Complet</p>
<p style="margin-top: 0; margin-bottom: 0;">arborescence du projet<br />
<br />
tp-express-mongo/<br />
│<br />
├── src/<br />
│   ├── server.js              <br />
│   │<br />
│   ├── api/<br />
│   │   ├── models/<br />
│   │   │   └── user.model.js   # Schéma MongoDB<br />
│   │   │<br />
│   │   ├── controllers/<br />
│   │   │   └── user.controller.js  # Logique métier CRUD<br />
│   │   │<br />
│   │   └── routes/<br />
│   │       └── user.routes.js  # Définition des endpoints REST<br />
│   │<br />
│   ├── middlewares/<br />
│   │   └── logger.js           <br />
│   │<br />
│   └── config/<br />
│       └── db.js               <br />
│<br />
├── .env                        <br />
├── package.json<br />
└── README.md<br />
<br />
 Idée clé :<br />
<br />
models = structure de la donnée (MongoDB)<br />
controllers = logique (que faire avec cette donnée)<br />
routes = quelles URL et quel HTTP method appellent quel controller<br />
server.js = colle tout ensemble et démarre le serveur<br />
</p>
<p style="margin-top: 0; margin-bottom: 0;">2. Initialisation rapide (rappel)<br />
<br />
mkdir tp-express-mongo<br />
cd tp-express-mongo<br />
<br />
npm init -y<br />
<br />
npm install express mongoose dotenv<br />
npm install --save-dev nodemon<br />
</p>
<p style="margin-top: 0; margin-bottom: 0;">3. Création des dossiers/fichiers<br />
<br />
mkdir src<br />
cd src<br />
mkdir api middlewares config<br />
cd api<br />
mkdir models controllers routes<br />
cd ../..<br />
touch .env README.md<br />
touch src/server.js<br />
touch src/config/db.js<br />
touch src/middlewares/logger.js<br />
touch src/api/models/user.model.js<br />
touch src/api/controllers/user.controller.js<br />
touch src/api/routes/user.routes.js<br />
</p>
<p style="margin-top: 0; margin-bottom: 0;">4. Fichier .env<br />
<br />
PORT=5000<br />
MONGODB_URI=mongodb://localhost:27017/tp_express_mongo<br />
<br />
PORT → port HTTP<br />
MONGODB_URI → base MongoDB locale<br />
</p>
<p style="margin-top: 0; margin-bottom: 0;">5. Connexion MongoDB – src/config/db.js<br />
<br />
const mongoose = require(&#039;mongoose&#039;);<br />
<br />
const connectDB = async () =&gt; {<br />
  try {<br />
    await mongoose.connect(process.env.MONGODB_URI);<br />
    console.log(&#039;MongoDB connecté&#039;);<br />
  } catch (error) {<br />
    console.error(error.message);<br />
    process.exit(1);<br />
  }<br />
};<br />
module.exports = connectDB;<br />
<br />
 Pourquoi ?<br />
- mongoose.connect → connexion DB<br />
- process.env → variables .env<br />
- process.exit(1) → stop API si DB HS<br />
</p>
<p style="margin-top: 0; margin-bottom: 0;">6. Modèle User – src/api/models/user.model.js<br />
<br />
const mongoose = require(&#039;mongoose&#039;);<br />
<br />
const userSchema = new mongoose.Schema({<br />
  name:String,email:String,age:Number<br />
},{timestamps:true});<br />
<br />
module.exports = mongoose.model(&#039;User&#039;, userSchema);<br />
</p>
<p style="margin-top: 0; margin-bottom: 0;"> Rôle du modèle :<br />
userSchema = structure de documents MongoDB<br />
User = interface d’accès DB<br />
</p>
<p style="margin-top: 0; margin-bottom: 0;">7. Controller CRUD – src/api/controllers/user.controller.js<br />
<br />
contient createUser, getAllUsers, getUserById, updateUser, deleteUser<br />
</p>
<p style="margin-top: 0; margin-bottom: 0;">8. Routes User – src/api/routes/user.routes.js<br />
<br />
router.post(&#039;/&#039;, createUser);<br />
router.get(&#039;/&#039;, getAllUsers);<br />
router.get(&#039;/:id&#039;, getUserById);<br />
router.put(&#039;/:id&#039;, updateUser);<br />
router.delete(&#039;/:id&#039;, deleteUser);<br />
<br />
 router = liaison HTTP → controller<br />
</p>
<p style="margin-top: 0; margin-bottom: 0;">9. Middleware logger – src/middlewares/logger.js<br />
<br />
console.log(req.method, req.url); next();<br />
<br />
 Sert pour debug<br />
</p>
<p style="margin-top: 0; margin-bottom: 0;">10. server.js (fichier principal)<br />
<br />
dotenv.config(); connectDB(); app.use(express.json());<br />
app.use(logger);<br />
app.use(&#039;/api/users&#039;,userRoutes);<br />
app.listen(PORT);<br />
</p>
<p style="margin-top: 0; margin-bottom: 0;">11. Scripts package.json<br />
<br />
&quot;start&quot;:&quot;node src/server.js&quot;, &quot;dev&quot;:&quot;nodemon src/server.js&quot;<br />
</p>
<p style="margin-top: 0; margin-bottom: 0;">12. Lancement<br />
<br />
npm run dev<br />
<br />
Test API :<br />
POST /api/users {name,email,age}<br />
GET/PUT/DELETE /api/users/:id<br />
</p>
<p style="margin-top: 0; margin-bottom: 0;">Creation de repo git : <br />
git init</p>
<p style="margin-top: 0; margin-bottom: 0;">git add .</p>
<p style="margin-top: 0; margin-bottom: 0;">git commit -m &quot;first commit&quot;</p>
<p style="margin-top: 0; margin-bottom: 0;">git branch -M main</p>
<p style="margin-top: 0; margin-bottom: 0;">git remote add origin https://github.com/MohamedSbika/tp_express.git</p>
<p style="margin-top: 0; margin-bottom: 0;">git push -u origin main</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p style="margin-top: 0; margin-bottom: 0;">Applications des methodes crud </p>
<p style="margin-top: 0; margin-bottom: 0;">Another git branch to make scenario reel <br />
partie auth ( jwt + documentation ) in middleware <br />
test avec postman </p>
<p style="margin-top: 0; margin-bottom: 0;">Partage de projet reelle avec express js </p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p style="margin-top: 0; margin-bottom: 0;">npm install bcryptjs jsonwebtoken</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</body>
</html>
